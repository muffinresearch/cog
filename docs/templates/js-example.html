{% extends 'base-example.html' %}

{% block example %}
<h2>this is a heading</h2>

<style>
  .bar {
    background: red;
    color: #fff;
  }
</style>

<div class="wrapper">
    <p class="foo">Hello I'm some text</p>
    <input type="text" value="hai" />
    <p class="foo2">Hello I'm some text as well</p>
</div>

<script>
  var foo = document.querySelector('.foo');
  var foo2 = document.querySelector('.foo2');
  var par = foo2.parentNode;
  var needsRemoving = true;

  window.setInterval(function() {
    if (needsRemoving) {
      foo.className = 'foo bar';
      foo2.parentNode.removeChild(foo2);
      needsRemoving = false;
    } else {
      foo.className = 'foo';
      par.appendChild(foo2);
      needsRemoving = true;
    }
  }, 2000);

  // select the target node
  var target = document.querySelector('.wrapper');
  var content = document.querySelector('.content');

  // create an observer instance
  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      parent.postMessage(target.innerHTML, window.location.origin);
    });
  });

  // configuration of the observer:
  var config = { attributes: true, childList: true, characterData: true, subtree: true };

  // pass in the target node, as well as the observer options
  observer.observe(target, config);
</script>
{% endblock %}
